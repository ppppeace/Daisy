<%- include('../partials/header.ejs') %>

<script src="/js/seat.js" defer></script>

<br>
<div class="container col-xxl-8 bg-white border shadow rounded-3">
    <div class="row flex-lg-row-reverse align-items-center g-5 p-3">
      <div class="col-lg-6">
        <h3 class="display-5 mb-3"><%= movie.name %></h3>
        <div class="px-1 py-1">    
            <p><span class="text-primary">Genre: </span><%= movie.genre %></p>
            <p><span class="text-primary">Rate: </span><%= movie.rate %>+</p>
            <p><span class="text-primary">Duration: </span><%= movie.time %> min</p>
            <% theater.cinema.forEach(function(cinemas){ %>
                <p><span class="text-primary">Location: </span><%= cinemas.name %></p>
            <% }); %>
            <p><span class="text-primary">Cinema: </span><%= theater.name %></p>
            <p><span class="text-primary">Time: </span><%= showtime.time %></p>
        </div>
      </div>
      <div class="col-10 col-sm-8 col-lg-6 image-box">
        <img src="<%= movie.img %>" class="d-block mx-lg-auto img-fluid shadow" alt="Movie Image" width="300" height="300" loading="lazy">
      </div>
    </div>
    <a href="/movie" class="back-sh btn" style="left: 800px;">Back</a>
</div>
<br>

<div class="container col-xxl-8 bg-white border shadow rounded-3">
    <div class="text-center py-2">
        <img src="/images/cinema-screen.png" class="rounded img-fluid" width="600px">
        <p class="text-muted">Screen</p>
    </div>
   
    <div class="row text-center"> 

        <div class="col-12">
            <span class="text-muted">E</span>
            <% showtime.seats.forEach(function(seats){ %>
                <% if(seats.name.includes("E")){ %>  
                    <% if(seats.status.includes("Disabled")){ %>
                        <button class="btn btn-sm sbtnn" id="<%= seats.name %>" disabled><img src="/images/seatowned.png"></button>   
                    <% } else { %>  
                        <button class="btn btn-sm sbtnn" id="<%= seats.name %>"><img src="<%= seats.img %>"></button>
                    <% } %>   
                <% } %>
            <% }); %>
            <span class="text-muted">E</span>
        </div>   

        <div class="col-12">
            <span class="text-muted">D</span>
            <% showtime.seats.forEach(function(seats){ %>
                <% if(seats.name.includes("D")){ %>  
                    <% if(seats.status.includes("Disabled")){ %>
                        <button class="btn btn-sm sbtnn" id="<%= seats.name %>" disabled><img src="/images/seatowned.png"></button>   
                    <% } else { %>  
                        <button class="btn btn-sm sbtnn" id="<%= seats.name %>"><img src="<%= seats.img %>"></button>
                    <% } %>   
                <% } %>
            <% }); %>
            <span class="text-muted">D</span>
        </div>   

        <div class="col-12">
            <span class="text-muted">C</span>
            <% showtime.seats.forEach(function(seats){ %>
                <% if(seats.name.includes("C")){ %>  
                    <% if(seats.status.includes("Disabled")){ %>
                        <button class="btn btn-sm sbtnn" id="<%= seats.name %>" disabled><img src="/images/seatowned.png"></button>   
                    <% } else { %>  
                        <button class="btn btn-sm sbtnn" id="<%= seats.name %>"><img src="<%= seats.img %>"></button>
                    <% } %>   
                <% } %>
            <% }); %>
            <span class="text-muted">C</span>
        </div> 

        <div class="col-12">
            <span class="text-muted">B</span>
            <% showtime.seats.forEach(function(seats){ %>
                <% if(seats.name.includes("B")){ %>
                    <% if(seats.status.includes("Disabled")){ %>
                        <button class="btn btn-sm sbtnn" id="<%= seats.name %>" disabled><img src="/images/seatowned.png"></button>   
                    <% } else { %>  
                        <button class="btn btn-sm sbtnn" id="<%= seats.name %>"><img src="<%= seats.img %>"></button>
                    <% } %>    
                <% } %>
            <% }); %>
            <span class="text-muted">B</span>
        </div> 

        <div class="col-12">
            <span class="text-muted">A</span>
            <% showtime.seats.forEach(function(seats){ %>
                <% if(seats.name.includes("A")){ %>  
                    <% if(seats.status.includes("Disabled")){ %>
                        <button class="btn btn-sm sbtnn" id="<%= seats.name %>" disabled><img src="/images/seatowned.png"></button>   
                    <% } else { %>  
                        <button class="btn btn-sm sbtnn" id="<%= seats.name %>"><img src="<%= seats.img %>"></button>
                    <% } %>   
                <% } %>
            <% }); %>
            <span class="text-muted">A</span>
        </div>

    </div>

    <hr class="my-4">

    <div class="row align-items-center g-lg-5 p-5">
        <div class="col-md-10 col-lg-5 mx-auto border shadow rounded p-3">
            <div class="text-center">
                <img src="<%= movie.img %>" width="200px" height="300px">
            </div>  
            <br>  
            <div class="d-flex px-4">
                <p class="text-primary">Seats Number: </p>
                <p id="sum"></p> 
            </div>  
            <div class="d-flex px-4">
                <p class="text-primary ">Total Price: </p>
                <p id="price">0</p>
                <p class="text-primary">à¸¿</p>
            </div>
            <form action="/movie/ticketing/<%= showtime._id%>" method='GET'>
                <input type="hidden" id="input" name="seatselect" value="">
                <button type="submit" class="btn comfirm-ticket float-end disabled" id="subbtn">Confirm Ticketing</button>
            </form>
        </div>
    </div>
</div>
<br>

<%- include('../partials/footer.ejs') %>